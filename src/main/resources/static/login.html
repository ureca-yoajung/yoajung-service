<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인 - YOAJUNG</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/login.css"/>
</head>
<body>
    <!-- Navigation -->
    <div id="navbar"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="login-container">
            <div class="login-header">
                <h1 class="login-title">로그인</h1>
                <p class="login-subtitle">YOAJUNG에 오신 것을 환영합니다</p>
            </div>

            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="email" class="form-label">이메일</label>
                    <input
                            type="email"
                            id="email"
                            name="email"
                            class="form-input"
                            placeholder="이메일을 입력하세요"
                            required
                    >
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">비밀번호</label>
                    <input
                            type="password"
                            id="password"
                            name="password"
                            class="form-input"
                            placeholder="비밀번호를 입력하세요"
                            required
                    >
                </div>

                <div class="form-options">
                    <div class="checkbox-group">
                        <input type="checkbox" id="remember" class="checkbox">
                        <label for="remember">로그인 상태 유지</label>
                    </div>
                    <a href="#" class="forgot-password">비밀번호 찾기</a>
                </div>

                <div id="errorMessage" class="error-message" style="display: none;"></div>

                <button type="submit" class="login-button">로그인</button>
            </form>

            <div class="divider">
                <span>또는</span>
            </div>

            <div class="social-login">
                <button class="social-button" onclick="socialLogin('kakao')">
                    카카오 로그인
                </button>
                <button class="social-button" onclick="socialLogin('naver')">
                    네이버 로그인
                </button>
            </div>

            <div class="signup-link">
                아직 계정이 없으신가요? <a href="signup.html">회원가입</a>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/assets/navbar.html')
                .then(res => res.text())
                .then(html => {
                    document.getElementById('navbar').innerHTML = html;
                })
                .catch(err => console.error('navbar 로딩 실패:', err));
        });
        
        function handleLogin(event) {
            event.preventDefault();

            const form = event.target;
            const email = form.email.value;
            const password = form.password.value;
            const remember = form.remember.checked;

            // 로딩 상태 시작
            form.classList.add('loading');
            hideError();

            // 간단한 유효성 검사
            if (!email || !password) {
                showError('이메일과 비밀번호를 모두 입력해주세요.');
                form.classList.remove('loading');
                return;
            }

            // 실제 로그인 로직 시뮬레이션
            setTimeout(() => {
                // 데모용 로그인 (실제로는 서버 API 호출)
                if (email === 'test@yoajung.com' && password === 'password') {
                    alert('로그인 성공!');
                    // 실제로는 토큰 저장 후 리다이렉트
                    window.location.href = 'index.html';
                } else {
                    showError('이메일 또는 비밀번호가 올바르지 않습니다.');
                }

                form.classList.remove('loading');
            }, 1500);
        }

        function socialLogin(provider) {
            alert(`${provider} 로그인 기능은 준비 중입니다.`);
        }

        function showError(message) {
            const errorElement = document.getElementById('errorMessage');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        function hideError() {
            const errorElement = document.getElementById('errorMessage');
            errorElement.style.display = 'none';
        }

        // 입력 필드 포커스 시 에러 메시지 숨기기
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('focus', hideError);
        });
    </script>
</body>
</html>